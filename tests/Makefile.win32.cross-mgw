##########################################################################
# Makefile for GLFW test programs on *nix using MinGW32
#-------------------------------------------------------------------------
# To compile the test files using this makefile, run:
#  make -f Makefile.win32.cross-mgw
##########################################################################

TARGET ?= i586-mingw32msvc-

# Compiler settings
CC     = gcc
CFLAGS = -I../include -Wall -O3 -ffast-math

# Linker settings
LFLAGS = -L../lib/win32 -lglfw -lglu32 -lopengl32 

# Subsystem settings
WINDOWS = -mwindows -e _mainCRTStartup
CONSOLE = -mconsole

BINARIES = accuracy.exe defaults.exe events.exe fsaa.exe fullscreen.exe \
           peter.exe reopen.exe tearing.exe version.exe

# Default: Build all tests
all: $(BINARIES)

clean:
	@rm -f $(BINARIES)

accuracy.exe: accuracy.c
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) accuracy.c $(LFLAGS) -o $@

defaults.exe: defaults.c
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) defaults.c $(LFLAGS) -o $@

events.exe: events.c
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) events.c $(LFLAGS) -o $@

fsaa.exe: fsaa.c
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) fsaa.c $(LFLAGS) -lm -o $@

fullscreen.exe: fullscreen.c
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) fullscreen.c $(LFLAGS) -lm -o $@

peter.exe: peter.c
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) peter.c $(LFLAGS) -o $@

reopen.exe: reopen.c
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) reopen.c $(LFLAGS) -lm -o $@

tearing.exe: tearing.c
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) tearing.c $(LFLAGS) -lm -o $@

version.exe: version.c
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) version.c $(LFLAGS) -lm -o $@

