##########################################################################
# Makefile for GLFW test programs on *nix using MinGW32
#-------------------------------------------------------------------------
# To compile the test files using this makefile, run:
#  make -f Makefile.win32.cross-mgw
##########################################################################

TARGET ?= i586-mingw32msvc-

CC     = gcc
CFLAGS = -I../include -Wall -O3 -ffast-math

LIB    = ../lib/win32/libglfw.a
LFLAGS = $(LIB) -lglu32 -lopengl32 

WINDOWS = -mwindows -e _mainCRTStartup
CONSOLE = -mconsole

BINARIES = accuracy.exe defaults.exe events.exe fsaa.exe fullscreen.exe \
           peter.exe reopen.exe tearing.exe version.exe

all: $(BINARIES)

accuracy.exe: accuracy.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) accuracy.c $(LFLAGS) -o $@

defaults.exe: defaults.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) defaults.c $(LFLAGS) -o $@

events.exe: events.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) events.c $(LFLAGS) -o $@

fsaa.exe: fsaa.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) fsaa.c $(LFLAGS) -lm -o $@

fullscreen.exe: fullscreen.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) fullscreen.c $(LFLAGS) -lm -o $@

peter.exe: peter.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) peter.c $(LFLAGS) -o $@

reopen.exe: reopen.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) reopen.c $(LFLAGS) -lm -o $@

tearing.exe: tearing.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(WINDOWS) tearing.c $(LFLAGS) -lm -o $@

version.exe: version.c getopt.c $(LIB)
	$(TARGET)$(CC) $(CFLAGS) $(CONSOLE) version.c getopt.c $(LFLAGS) -lm -o $@

clean:
	rm -f $(BINARIES)

